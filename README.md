# Тестовое задание "Микросервис для счетчиков статистики"

Описание решаемой задачи в файле [TASK.MD](https://github.com/wertigo285/statistic-microservice-testcase/blob/main/TASK.MD)

Задача выполнена на Python, c использованием фрэймворка [FastAPI](https://fastapi.tiangolo.com/) и библиотеки [SQLAlchemy](https://www.sqlalchemy.org/).

Реализованно опциональное хранение данных in-memory и в базе SQLite. Настройки хранятся в файле .env, если в параметре SQL указано значение True - данные хранятся в SQLite, если параметр не заполнен или заполнен другим значением, данные хранятся в памяти.
При первом запуске проекта с хранением в SQLite файл БД и таблицы создаются автоматически.
Реализован выбор поля сортировки статистики.


## Быстрый запуск на Docker

### 1. Установить Docker

Процесс установки описан в [официальном руководстве](https://docs.docker.com/engine/install/).

### 2. Загрузить образ

```
docker pull skhortyuk/statistic_micro
```

### 3. Запустить контейнер

```
docker run -p 8000:8000 skhortyuk/statistic_micro
```

После запуска контейнера микросервис будет доступен по адресу 127.0.0.1:8000


## Запук проекта

Для запуска проекта, в папке клонированного репозитория, после установки зависимостей из файла requirements.txt, необходимо выполнить команду.

```
uvicorn src.main:app --port 8000

```
После запуска проект будет доступен по адресу 127.0.0.1:8000

## Документация

После запуска проекта документация сгенерируется автоматически и будет доступна по адресу http://127.0.0.1:8000/docs (Swagger) и http://127.0.0.1:8000/redoc (ReDoc).

В метод показа статистики добавлен параметр 'sort_by', в котором можно указать поле для сортировки. По умолчанию сортировка выполняется по дате.

## ToDo
* Тесты
* CI и автоматическая выгрузка образа в Docker Hub

### использованные технологии

* [Python 3.8](https://www.python.org/)
* [FastApi](https://fastapi.tiangolo.com/)
* [SQLAlchemy ORM](https://www.sqlalchemy.org/)
* [SQLite](https://www.sqlite.org/)
